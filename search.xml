<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Pandas习题</title>
      <link href="/posts/c02b5fa5.html"/>
      <url>/posts/c02b5fa5.html</url>
      
        <content type="html"><![CDATA[<h1 id="Pandas习题-盖若"><a href="#Pandas习题-盖若" class="headerlink" title="Pandas习题 - 盖若"></a>Pandas习题 - 盖若</h1><h2 id="解析开始结束年份和最大间隔"><a href="#解析开始结束年份和最大间隔" class="headerlink" title="解析开始结束年份和最大间隔"></a><a href="https://gairuo.com/m/pandas-parsing-year-gap">解析开始结束年份和最大间隔</a></h2><blockquote><p>题目：在一个列表形式的数据中，来解析开始和结束年份以及它们的最大年份间隔</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io</span><br><span class="line"></span><br><span class="line">data = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Years</span></span><br><span class="line"><span class="string">[1990,1991,1995,2000,2001,2006]</span></span><br><span class="line"><span class="string">[1990,1990]</span></span><br><span class="line"><span class="string">[1980,1981,1990,1995]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">df = pd.read_csv(io.StringIO(data), sep=<span class="string">r&#x27;\s+&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 需求结果</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">   from_year  to_year  largest_gap</span></span><br><span class="line"><span class="string">0       1990     2006            5</span></span><br><span class="line"><span class="string">1       1990     1990            0</span></span><br><span class="line"><span class="string">2       1980     1995            9</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><blockquote><p>解法：</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(</span><br><span class="line">    df.Years.<span class="built_in">map</span>(<span class="built_in">eval</span>).explode()</span><br><span class="line">    .groupby(level=<span class="number">0</span>)</span><br><span class="line">    .agg(from_year=<span class="string">&quot;min&quot;</span>,to_year=<span class="string">&quot;max&quot;</span>,largest_gap=<span class="keyword">lambda</span> x:x.diff().<span class="built_in">max</span>())</span><br><span class="line">)</span><br></pre></td></tr></table></figure><hr><h2 id="openpyxl完成Excel指定单元格样式"><a href="#openpyxl完成Excel指定单元格样式" class="headerlink" title="openpyxl完成Excel指定单元格样式"></a><a href="https://gairuo.com/m/pandas-openpyxl-excel-cell-styles">openpyxl完成Excel指定单元格样式</a></h2><blockquote><p>题目：将 <code>&#39;B5&#39;:&#39;E10&#39;</code> 范围的单元格设置为绿色背景、红色字体、14 号大小</p></blockquote><blockquote><p>解法：</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> load_workbook</span><br><span class="line"><span class="keyword">from</span> openpyxl.styles <span class="keyword">import</span> Font, PatternFill, colors</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载 Excel 文件</span></span><br><span class="line">workbook = load_workbook(<span class="string">&#x27;team.xlsx&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择工作表</span></span><br><span class="line">sheet = workbook.active</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选取单元格范围</span></span><br><span class="line">df = pd.DataFrame(sheet[<span class="string">&#x27;B5&#x27;</span>:<span class="string">&#x27;E10&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">modify_style</span>(<span class="params">cell</span>):</span><br><span class="line">    <span class="comment"># 设置样式</span></span><br><span class="line">    bold_font = Font(size=<span class="number">14</span>, bold=<span class="literal">True</span>, color=<span class="string">&#x27;FF0000&#x27;</span>)</span><br><span class="line">    yellow_fill = PatternFill(start_color=<span class="string">&#x27;00FF00&#x27;</span>,</span><br><span class="line">                          end_color=<span class="string">&#x27;00FF00&#x27;</span>,</span><br><span class="line">                          fill_type=<span class="string">&#x27;solid&#x27;</span>)</span><br><span class="line">    <span class="comment"># 修改样式</span></span><br><span class="line">    cell.font = bold_font</span><br><span class="line">    cell.fill = yellow_fill</span><br><span class="line"></span><br><span class="line"><span class="comment"># 应用修改样式</span></span><br><span class="line">df.<span class="built_in">map</span>(modify_style)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存修改后的 Excel 文件</span></span><br><span class="line">workbook.save(<span class="string">&#x27;team_formatted.xlsx&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭 Excel 文件</span></span><br><span class="line">workbook.close()</span><br></pre></td></tr></table></figure><hr><h2 id="两个不同结构DataFrame相加合并"><a href="#两个不同结构DataFrame相加合并" class="headerlink" title="两个不同结构DataFrame相加合并"></a><a href="https://gairuo.com/m/pandas-addition-dataframes">两个不同结构DataFrame相加合并</a></h2><blockquote><p>题目：将两个 DataFrame 合并，共有的索引标签 c2 行的值相加，非共有的 c1、c3 保持原值</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df1 = pd.DataFrame(&#123;<span class="string">&#x27;a&#x27;</span>:[<span class="number">1</span>,<span class="number">2</span>], <span class="string">&#x27;b&#x27;</span>:[<span class="number">3</span>,<span class="number">4</span>]&#125;, index=[<span class="string">&#x27;c1&#x27;</span>,<span class="string">&#x27;c2&#x27;</span>])</span><br><span class="line">df2 = pd.DataFrame(&#123;<span class="string">&#x27;a&#x27;</span>:[<span class="number">1</span>,<span class="number">2</span>], <span class="string">&#x27;b&#x27;</span>:[<span class="number">3</span>,<span class="number">4</span>]&#125;, index=[<span class="string">&#x27;c2&#x27;</span>,<span class="string">&#x27;c3&#x27;</span>])</span><br></pre></td></tr></table></figure><blockquote><p>解法：</p></blockquote><ol><li><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df1.add(df2,fill_value=<span class="number">0</span>).astype(<span class="built_in">int</span>)</span><br></pre></td></tr></table></figure></li><li><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(df1 + df2).fillna(df1).fillna(df2).astype(<span class="built_in">int</span>)</span><br><span class="line">   </span><br><span class="line"><span class="comment"># 类似方法</span></span><br><span class="line">(df1 + df2).combine_first(df1).combine_first(df2).astype(<span class="built_in">int</span>)</span><br></pre></td></tr></table></figure></li></ol><hr><h2 id="根据文本数据提取特征"><a href="#根据文本数据提取特征" class="headerlink" title="根据文本数据提取特征"></a><a href="https://gairuo.com/m/pandas-text-extraction-features">根据文本数据提取特征</a></h2><blockquote><p>题目：在数据后边增加一些列，每个字母为一列，值为本行对应字母的数量</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(&#123;<span class="string">&#x27;a&#x27;</span>: [<span class="string">&#x27;6R-5A-4G-7R&#x27;</span>,</span><br><span class="line">                         <span class="string">&#x27;2A-4G-3A&#x27;</span>,</span><br><span class="line">                         <span class="string">&#x27;8G&#x27;</span>,</span><br><span class="line">                         <span class="string">&#x27;1R-9A&#x27;</span>]</span><br><span class="line">                  &#125;)</span><br><span class="line">df</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">             a</span></span><br><span class="line"><span class="string">0  6R-5A-4G-7R</span></span><br><span class="line"><span class="string">1     2A-4G-3A</span></span><br><span class="line"><span class="string">2           8G</span></span><br><span class="line"><span class="string">3        1R-9A</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 所需结果</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">             a   R  A  G</span></span><br><span class="line"><span class="string">0  6R-5A-4G-7R  13  5  4</span></span><br><span class="line"><span class="string">1     2A-4G-3A   0  5  4</span></span><br><span class="line"><span class="string">2           8G   0  0  8</span></span><br><span class="line"><span class="string">3        1R-9A   1  9  0</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><blockquote><p>解法：利用<code>Counter</code>返回字符串的字符和出现次数的字典</p></blockquote><blockquote><p>手动实现<code>Counter</code>效果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">My_Counter</span>(<span class="params">letters:<span class="built_in">str</span></span>) -&gt; <span class="built_in">dict</span>:</span><br><span class="line"> letter_dict = &#123;&#125;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">for</span> letter <span class="keyword">in</span> letters:</span><br><span class="line">     letter_dict[letter] = (letter_dict[letter] + <span class="number">1</span> <span class="keyword">if</span> letter <span class="keyword">in</span> letter_dict <span class="keyword">else</span> <span class="number">1</span>)</span><br><span class="line">     </span><br><span class="line"> <span class="keyword">return</span> letter_dict</span><br></pre></td></tr></table></figure></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"></span><br><span class="line">ser = (</span><br><span class="line">    df.a.<span class="built_in">map</span>(<span class="keyword">lambda</span> x:x.split(<span class="string">&quot;-&quot;</span>))</span><br><span class="line">    .<span class="built_in">map</span>(<span class="keyword">lambda</span> i:<span class="string">&quot;&quot;</span>.join([j[<span class="number">1</span>] * <span class="built_in">int</span>(j[<span class="number">0</span>]) <span class="keyword">for</span> j <span class="keyword">in</span> i]))</span><br><span class="line">    .<span class="built_in">map</span>(Counter)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">df2 = pd.DataFrame(ser.to_list()).fillna(<span class="number">0</span>).astype(<span class="built_in">int</span>)</span><br><span class="line"></span><br><span class="line">df.merge(df2,left_index=<span class="literal">True</span>,right_index=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><hr><h2 id="按列拆分导出Excel"><a href="#按列拆分导出Excel" class="headerlink" title="按列拆分导出Excel"></a><a href="https://gairuo.com/m/pandas-split-column-export-excel">按列拆分导出Excel</a></h2><blockquote><p>题目：按列拆分Excel，批量将一个Excel拆分多个Excel</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">df = pd.read_excel(<span class="string">&#x27;https://gairuo.com/file/data/team.xlsx&#x27;</span>)</span><br><span class="line">df = df.head()</span><br><span class="line">df.columns = [<span class="string">&#x27;name&#x27;</span>] + [<span class="string">&#x27;foo&#x27;</span>]*<span class="number">2</span> + [<span class="string">&#x27;bar&#x27;</span>]*<span class="number">3</span></span><br><span class="line">df</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    name  foo  foo  bar  bar  bar</span></span><br><span class="line"><span class="string">0  Liver    E   89   21   24   64</span></span><br><span class="line"><span class="string">1   Arry    C   36   37   37   57</span></span><br><span class="line"><span class="string">2    Ack    A   57   60   18   84</span></span><br><span class="line"><span class="string">3  Eorge    C   93   96   71   78</span></span><br><span class="line"><span class="string">4    Oah    D   65   49   61   86</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><blockquote><p>解法：因groupby中axis&#x3D;1已弃用，故使用T方法进行转置</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">df.set_index(<span class="string">&#x27;name&#x27;</span>,inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">df.T.groupby(level=<span class="number">0</span>).apply(<span class="keyword">lambda</span> x:x.T.to_excel(<span class="string">f&quot;<span class="subst">&#123;x.name&#125;</span>.xlsx&quot;</span>))</span><br></pre></td></tr></table></figure><h2 id="对每个工作簿增加工作簿名称的列"><a href="#对每个工作簿增加工作簿名称的列" class="headerlink" title="对每个工作簿增加工作簿名称的列"></a><a href="https://gairuo.com/m/pandas-column-workbook-name-excel">对每个工作簿增加工作簿名称的列</a></h2><blockquote><p>题目：在工作簿的每个工作表数据内都插入一列，列的内容为对应工作的名称</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dfs = pd.read_excel(<span class="string">&quot;data/company.xlsx&quot;</span>,sheet_name=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure><blockquote><p>解法：</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> pd.ExcelWriter(<span class="string">&quot;data/company.xlsx&quot;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    <span class="keyword">for</span> sht_name,df <span class="keyword">in</span> dfs.items():</span><br><span class="line">        df.assign(company = sht_name).to_excel(file,sheet_name=sht_name,index=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Pandas </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Pandas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo Guide</title>
      <link href="/posts/b08947fa.html"/>
      <url>/posts/b08947fa.html</url>
      
        <content type="html"><![CDATA[<h1 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h1><h2 id="Git安装"><a href="#Git安装" class="headerlink" title="Git安装"></a>Git安装</h2><p><a href="https://git-scm.com/">https://git-scm.com/</a></p><h2 id="Node-js安装"><a href="#Node-js安装" class="headerlink" title="Node.js安装"></a>Node.js安装</h2><p><a href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a></p><h2 id="Hexo安装"><a href="#Hexo安装" class="headerlink" title="Hexo安装"></a>Hexo安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用 npm 安装 Hexo</span></span><br><span class="line">npm install -g hexo-cli</span><br><span class="line"></span><br><span class="line"><span class="comment"># Hexo初始化</span></span><br><span class="line">hexo init &lt;folder&gt;</span><br><span class="line"><span class="built_in">cd</span> &lt;folder&gt;</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><h1 id="Github配置"><a href="#Github配置" class="headerlink" title="Github配置"></a>Github配置</h1><h2 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h2><blockquote><p>仓库名称必须为<code>用户名 + github.io</code>，可视化为<code>Public</code></p></blockquote><h2 id="git配置"><a href="#git配置" class="headerlink" title="git配置"></a>git配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置用户名和邮箱</span></span><br><span class="line">git config --global user.name <span class="string">&quot;xxx&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;xxx@gmail.com&quot;</span></span><br></pre></td></tr></table></figure><h2 id="SSH-KEY配置"><a href="#SSH-KEY配置" class="headerlink" title="SSH KEY配置"></a>SSH KEY配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建SSH KEY,将用户文件夹下的id_rsa.pub文件的内容复制到github的SSH KEYS中</span></span><br><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;xxx@gmail.com&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试是否成功连接</span></span><br><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><p><img src="https://gcore.jsdelivr.net/gh/Ethylenekun/images/img/github_ssh_key.png" alt="github ssh key"></p><blockquote><p>可能会出现错误<code>ssh: connect to host github.com port 22: Connection timed out </code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 由于默认的 SSH 22 端口被防火墙或网络策略限制，导致无法连接到 GitHub 的服务器</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接改为 SSH 的 443 端口</span></span><br><span class="line"><span class="built_in">touch</span> ~/.ssh/config</span><br><span class="line"></span><br><span class="line"><span class="comment"># config文件添加以下内容</span></span><br><span class="line">Host github.com</span><br><span class="line">HostName ssh.github.com</span><br><span class="line">User git</span><br><span class="line">Port 443</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~/.ssh/id_rsa</span><br><span class="line"></span><br><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure></blockquote><h2 id="一键部署"><a href="#一键部署" class="headerlink" title="一键部署"></a>一键部署</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装hexo-deployer-git</span></span><br><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># _config.yml配置</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:xxx/xxx.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br></pre></td></tr></table></figure><h2 id="hexo源文件同步github"><a href="#hexo源文件同步github" class="headerlink" title="hexo源文件同步github"></a>hexo源文件同步github</h2><p><a href="https://midoli.top/2024/12/01/Hexo%E5%9C%A8%E5%A4%9A%E5%8F%B0%E7%94%B5%E8%84%91%E4%B8%8A%E6%8F%90%E4%BA%A4%E5%92%8C%E6%9B%B4%E6%96%B0/">网友教程</a></p><blockquote><p><code>main</code>分支存放hexo生成的静态文件，而<code>source</code>分支设置为默认分支，存放hexo源文件</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 复制source分支下的文件，仅保留.git文件夹</span></span><br><span class="line">git <span class="built_in">clone</span> git@github.com:xxx/xxx.github.io.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将源文件除.deploy_git 以外都复制到clone下来的文件夹中</span></span><br><span class="line"><span class="comment"># 删除theme主题文件夹下的.git</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 推送源文件到source分支</span></span><br><span class="line">git add .</span><br><span class="line">git commit –m add_branch</span><br><span class="line">git push</span><br></pre></td></tr></table></figure><h2 id="github图床配置"><a href="#github图床配置" class="headerlink" title="github图床配置"></a>github图床配置</h2><blockquote><p>jsdeliver节点可能存在不可用的网络问题</p></blockquote><ol><li>创建github仓库，并生成token</li><li>配置PicGo(<a href="https://github.com/Molunerfinn/PicGo">PicGo github地址</a>)，设置自定义域名<a href="https://gcore.jsdelivr.net/gh/Ethylenekun/images">https://gcore.jsdelivr.net/gh/Ethylenekun/images</a></li><li>typora设置，图像 - 上传图片 - 上传服务(PicGo_app)</li></ol><h2 id="NAS图床设置"><a href="#NAS图床设置" class="headerlink" title="NAS图床设置"></a>NAS图床设置</h2><p><a href="https://zhuanlan.zhihu.com/p/382702959">知乎教程</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 因PicGO插件功能存在问题,使用命令行安装ftp上传插件</span></span><br><span class="line"><span class="built_in">cd</span> C:\Users\yixi7\AppData\Roaming\picgo</span><br><span class="line">npm install picgo-plugin-ftp-uploader</span><br></pre></td></tr></table></figure><blockquote><p>PicGO FTP上传配置</p></blockquote><p><img src="https://gcore.jsdelivr.net/gh/Ethylenekun/images/img/FTP%E4%B8%8A%E4%BC%A0%E8%AE%BE%E7%BD%AE.png" alt="PicGO FTP uploader config"></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;NAS&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://xxx:5543/&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/&#123;year&#125;/&#123;month&#125;/&#123;day&#125;/&#123;fullName&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;uploadPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/PicBed/upload/&#123;year&#125;/&#123;month&#125;/&#123;day&#125;/&#123;fullName&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;port&quot;</span><span class="punctuation">:</span> <span class="number">5542</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;host&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxx&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>NAS FTP设置：由于上传的用户少，被动端口范围设置为4200-4205</p></blockquote><p><img src="https://gcore.jsdelivr.net/gh/Ethylenekun/images/img/image-20251109082126997.png" alt="NAS FTP config"></p><blockquote><p>路由设置：FTP端口转发，FTP服务端口和被动端口都要设置转发</p></blockquote><p><img src="https://gcore.jsdelivr.net/gh/Ethylenekun/images/img/image-20251109083334323.png" alt="image-20251109083334323"></p><p><img src="https://gcore.jsdelivr.net/gh/Ethylenekun/images/img/image-20251109083252737.png" alt="image-20251109083252737"></p><h1 id="主题设置"><a href="#主题设置" class="headerlink" title="主题设置"></a>主题设置</h1><p><a href="https://butterfly.js.org/posts/21cfbf15/">Butterfly官方文档</a></p><h2 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo 根目录运行</span></span><br><span class="line">git <span class="built_in">clone</span> -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly</span><br><span class="line"></span><br><span class="line"><span class="comment"># 应用主题 Hexo 根目錄下的 _config.yml，把主題改為 butterfly</span></span><br><span class="line">theme: butterfly</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 pug 以及 stylus 的渲染器</span></span><br><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure><h3 id="升级建议"><a href="#升级建议" class="headerlink" title="升级建议"></a>升级建议</h3><p>在 hexo 的根目錄創建一個文件 <code>_config.butterfly.yml</code>，並把主題目錄的 <code>_config.yml</code> 內容複製到 <code>_config.butterfly.yml</code> </p><h1 id="Hexo配置文件"><a href="#Hexo配置文件" class="headerlink" title="Hexo配置文件"></a>Hexo配置文件</h1><blockquote><p><code>_config.yml</code>配置文件</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Site</span></span><br><span class="line">title: Ethylene<span class="string">&#x27;s Blog</span></span><br><span class="line"><span class="string">subtitle: &#x27;</span>沉思<span class="string">&#x27;</span></span><br><span class="line"><span class="string">description: &#x27;</span>若遇见你不是奇迹，灵魂便不曾言语<span class="string">&#x27;</span></span><br><span class="line"><span class="string">keywords: &#x27;</span>Python,Pandas,MySQL,Django<span class="string">&#x27;</span></span><br><span class="line"><span class="string">author: Ethylene</span></span><br><span class="line"><span class="string">language: zh-CN</span></span><br><span class="line"><span class="string">timezone: &#x27;</span>Asia/Shanghai<span class="string">&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># URL</span></span><br><span class="line">url: https://xxx.xxx.io/</span><br></pre></td></tr></table></figure><h1 id="其他配置"><a href="#其他配置" class="headerlink" title="其他配置"></a>其他配置</h1><h2 id="文章链接配置"><a href="#文章链接配置" class="headerlink" title="文章链接配置"></a>文章链接配置</h2><p><a href="https://github.com/ohroy/hexo-abbrlink">hexo-abbrlink github地址</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-abbrlink --save</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># _config.yml配置</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">posts/:abbrlink.html</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># abbrlink config</span></span><br><span class="line"><span class="attr">abbrlink:</span></span><br><span class="line">  <span class="attr">alg:</span> <span class="string">crc32</span>      </span><br><span class="line">  <span class="attr">rep:</span> <span class="string">hex</span></span><br></pre></td></tr></table></figure><h2 id="live2D配置"><a href="#live2D配置" class="headerlink" title="live2D配置"></a>live2D配置</h2><p><a href="https://github.com/EYHN/hexo-helper-live2d">hexo-helper-live2d github地址</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-helper-live2d</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装模型</span></span><br><span class="line">npm install --save live2d-widget-model-wanko</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># _config.yml配置</span></span><br><span class="line"><span class="attr">live2d:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">scriptFrom:</span> <span class="string">local</span></span><br><span class="line">  <span class="attr">pluginRootPath:</span> <span class="string">live2dw/</span></span><br><span class="line">  <span class="attr">pluginJsPath:</span> <span class="string">lib/</span></span><br><span class="line">  <span class="attr">pluginModelPath:</span> <span class="string">assets/</span></span><br><span class="line">  <span class="attr">tagMode:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">log:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">model:</span></span><br><span class="line">    <span class="attr">use:</span> <span class="string">live2d-widget-model-wanko</span></span><br><span class="line">  <span class="attr">display:</span></span><br><span class="line">    <span class="attr">position:</span> <span class="string">left</span></span><br><span class="line">    <span class="attr">width:</span> <span class="number">150</span></span><br><span class="line">    <span class="attr">height:</span> <span class="number">300</span></span><br><span class="line">  <span class="attr">mobile:</span></span><br><span class="line">    <span class="attr">show:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">react:</span></span><br><span class="line">    <span class="attr">opacity:</span> <span class="number">0.7</span></span><br></pre></td></tr></table></figure><h2 id="swiper插件配置"><a href="#swiper插件配置" class="headerlink" title="swiper插件配置"></a>swiper插件配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装swiper依赖</span></span><br><span class="line">npm install hexo-butterfly-swiper --save</span><br></pre></td></tr></table></figure><blockquote><p><code> _config.butterfly.yml</code>配置</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">swiper:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 开关</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">5</span> <span class="comment">#过滤器优先权</span></span><br><span class="line">  <span class="attr">enable_page:</span> <span class="string">all</span> <span class="comment"># 应用页面</span></span><br><span class="line">  <span class="attr">timemode:</span> <span class="string">date</span> <span class="comment">#date/updated</span></span><br><span class="line">  <span class="attr">layout:</span> <span class="comment"># 挂载容器类型</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">id</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">recent-posts</span></span><br><span class="line">    <span class="attr">index:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">default_descr:</span> <span class="string">再怎么看我也不知道怎么描述它的啦！</span></span><br><span class="line">  <span class="attr">swiper_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css</span> <span class="comment">#swiper css依赖</span></span><br><span class="line">  <span class="attr">swiper_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js</span> <span class="comment">#swiper js依赖</span></span><br><span class="line">  <span class="attr">custom_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css</span> <span class="comment"># 适配主题样式补丁</span></span><br><span class="line">  <span class="attr">custom_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js</span> <span class="comment"># swiper初始化方法</span></span><br><span class="line">  </span><br><span class="line"><span class="attr">pjax:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br></pre></td></tr></table></figure><blockquote><p><code>post front-matter</code>配置</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swiper<span class="emphasis">_index: 1</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Github </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>分类</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>友情链接</title>
      <link href="/link/index.html"/>
      <url>/link/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>标签</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/style.css"/>
      <url>/css/style.css</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
